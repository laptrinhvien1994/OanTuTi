<div id="viewport" ng-controller="MainController">
    <div id="backdrop-doc" ng-show="isShowHideCreateCustomer" ng-click="closeCreateCustomerPopOver()"></div>
    <div id="createCustomerPopOver" ng-show="isShowHideCreateCustomer">
        <div class="header">
            <span>Tạo mới khách hàng</span>
            <span class="close-button" ng-click="closeCreateCustomerPopOver()"></span>
        </div>
        <div class="content">
            <div class="group-control">
                <div class="title">Tên khách hàng</div>
                <input class="input" type="text" placeholder="Nhập tên khách hàng...">
            </div>
            <div class="group-control">
                <div class="title">Mã khách hàng</div>
                <input class="input" type="text" placeholder="Nhập mã khách hàng (tự động sinh nếu để trống)...">
            </div>
            <div class="group-control">
                <div class="title">Số điện thoại</div>
                <input class="input" type="text" placeholder="Nhập số điện thoại của khách hàng...">
            </div>
            <div class="group-control">
                <div class="title">Email</div>
                <input class="input" type="text" placeholder="Nhập email (ví dụ: kh01@gmail.com)...">
            </div>
            <div class="group-control">
                <div class="title">Địa chỉ</div>
                <input class="input" type="text" placeholder="Nhập địa chỉ của khách hàng...">
            </div>
            <div class="group-control">
                <div class="title">Ghi chú</div>
                <input class="input" type="text" placeholder="Nhập ghi chú của khách hàng...">
            </div>
            <div class="group-control">
                <div class="title">Ngày sinh</div>
                <input class="input" type="text" placeholder="Nhập ngày sinh của khách hàng...">
            </div>
            <div class="group-control">
                <div class="title">Giới tính</div>
                <span class="radio-group">
                    <input class="radio-btn" name="gender" checked="" type="radio"><span>Nam</span>
                </span> &nbsp;
                <span class="radio-group">
                    <input class="radio-btn" name="gender" type="radio"><span>Nữ</span>
                </span>
            </div>
        </div>
        <div class="footer">
            <a href="#">Tạo</a>
        </div>
    </div>
    <div id="receiverPopOver">
        <div class="header">
        </div>
        <div
    </div>
    <button ng-if="!isOpening" id="tao-don-hang" ng-click="openPanel()"><i class="fa fa-desktop"></i> SUNO POS</button>
    <div class="pos-panel" style="position: fixed;">
        <div id="backdrop" ng-show="isOpenDiscountPopOver || isOpenConfigPopOver" ng-click="hideBackdrop()"></div>

        <div class="pos-header">
            <span id="collapse-btn" title="Ẩn SUNO POS" ng-click="closePanel()">&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <span id="username" ng-if="userSession" style="cursor: pointer;" ng-click="showHideUserContextMenu()">{{userSession.displayName}}
            </span>
            <span class="context-menu" ng-if="userSession" ng-class="isShowContextMenu ? 'active' : ''" ng-click="showHideUserContextMenu()" id="menu">&nbsp;&nbsp;&nbsp;&nbsp;</span>
        </div>

        <div class="pos-body">
            <!-- Bảng thông báo -->
            <div class="notification-panel {{nClass}}" ng-if="nActived">
                <div class="n-header">
                    {{n.header}}
                </div>
                <div class="n-body">
                    {{n.body}}
                </div>
            </div>
            <!-- Bắt đầu màn hình POS -->
            <!-- Màn hình Login -->
            <div ng-if="!userSession">
                <div class="form-control">
                    <h3 class="margin-bottom-10">Đăng nhập</h3>
                    <p>Tài khoản SUNO</p>
                    <div>
                        <input type="text" name="username" ng-model="username" autocomplete="off">
                    </div>
                    <p>Mật khẩu</p>
                    <div class="margin-bottom-10">
                        <input type="password" name="password" ng-model='password' autocomplete="off">
                    </div>
                    <div>
                        <button class="btn btn-login" ng-click="login(username,password)">Đăng nhập</button>
                    </div>
                </div>
            </div>

            <!-- Màn hình POS -->
            <div ng-if="userSession">
                <autocomplete attr-id="suggestProduct" attr-inputid="txtSuggestProduct" ng-model="searchKey" template-id="SuggestProductTemplate" attr-placeholder="Tìm kiếm hàng hóa" on-select="pickProduct" on-type="get_search_rs" on-focus="focusInput" data="searchList.items"></autocomplete>
                <script type="text/x-angular-template" id="SuggestProductTemplate">
                    <li suggestion ng-repeat="item in suggestions track by $index" index="{{ $index }}" val="{{item}}" ng-class="{ active: ($index === selectedIndex) }" ng-click="select(item)" style="cursor:pointer;">
                        <table class="width-100">
                            <tbody>
                                <tr>
                                    <td rowspan="2"><img width="31" height="31" style="border: 1px solid #e2e2e2" ng-src="{{item.img}}"></td>
                                    <td class="text-left">
                                        <b>{{item.itemName | charLimit:27}}</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-right nowrap" style="padding-left: 3px;">
                                        Giá: <b>{{item.retailPrice}}</b> | Số lượng: <b>{{item.qtyAvailable}}</b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </li>
                </script>
                <div id="pos-orders" ng-if="selectedOrder.saleOrder.orderDetails.length > 0">
                <div id="detail-title">CHI TIẾT ĐƠN HÀNG</div>
                    <ul class="mCustomScrollbar" data-mcs-axis="y">
                        <li ng-repeat="item in selectedOrder.saleOrder.orderDetails" class="items-in-orderList" ng-mouseleave="itemLeave($event)" ng-mouseover="itemHover($event)">
                            <div class="item-name">
                                <a ng-href="https://pos.suno.vn/Manage/#/product/detail/{{item.productId}}" target="_blank" title="{{item.itemName}}">{{item.itemName | charLimit:33}}</a>
                            </div>
                            <div>
                                <span class="color-1">Đơn giá: {{item.retailPrice | number}}
                                    <span class="discount-value">(giảm 200)</span>
                                </span>
                                &nbsp;
                                <span class="img-gift" id="id_{{item.itemId}}" ng-click="showHideDiscountPopOver(item)" title="Giảm giá sản phẩm"><img width="14" height="14" src="https://emojipedia-us.s3.amazonaws.com/thumbs/120/facebook/111/wrapped-present_1f381.png" /></span>
                            </div>
                            <div>
                                <span class="color-1">Số lượng: <input class="item-quantity" type="number" min="1" max="999" ng-model="item.quantity" ng-change="quantityChange(item)"> </span>
                            </div>
                            <div>
                                <span class="color-1" data-title="Title" data-content="Content..." data-placement="right">Thành tiền: <b class="sum">{{item.retailPrice * item.quantity | number}}</b></span>&nbsp;&nbsp;
                            </div>
                            <div class="remove-button" ng-click="removeItem(item)"></div>
                        </li>
                    </ul>
                </div>
                <div id="user-menu" ng-show="isShowContextMenu">
                    <div class="triangle"></div>
                    <div class="popover-content">
                        <ul>
                            <li class="checked item">Quản lí</li>
                            <li class="seperator2"></li>
                            <li class="checked item">Đăng xuất</li>
                        </ul>
                    </div>
                </div>
                <div class="discount-popover" id="popover2" ng-show="isOpenDiscountPopOver">
                    <div class="triangle"></div>
                    <div class="popover-content">
                        <div class="popover-title">
                            <span>Giảm giá</span>
                        </div>
                        <div class="separator"></div>
                        <div class="popover-body">
                            <table>
                                <tr>
                                    <td>
                                        <span class="label">Giá mới</span>
                                    </td>
                                    <td>
                                        <input class="input" type="text">
                                    </td>
                                    <td class="td3">
                                        <span ng-show="isDiscountByPercent" class="percent-sign">%</span>
                                        <span ng-show="!isDiscountByPercent" class="currency-sign">VNĐ</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label">Giảm giá</span>
                                    </td>
                                    <td>
                                        <input class="input" type="text">
                                    </td>
                                    <td>
                                        <label class="switch">
                                            <input type="checkbox" ng-model="isDiscountByPercent">
                                            <span class="slider"></span>
                                        </label>
                                    </td>
                                </tr>
                            </table>

                            <span class="group-control">
                                &nbsp;
                                <input type="button" class="button" value="5%">
                                <input type="button" class="button" value="10%">
                                <input type="button" class="button" value="15%">
                            </span>
                        </div>
                        <div class="remove-btn" ng-click="closeDiscountPopOver()"></div>
                    </div>
                </div>

                <div class="discount-popover" id="popover1" ng-show="isOpenDiscountOrderPopOver">
                    <div class="triangle"></div>
                    <div class="popover-content">
                        <div class="popover-title">
                            <span>Giảm giá</span>
                        </div>
                        <div class="separator"></div>
                        <div class="popover-body">
                            <table>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td class="td3">
                                        <span ng-show="isDiscountByPercent" class="percent-sign">%</span>
                                        <span ng-show="!isDiscountByPercent" class="currency-sign">VNĐ</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label">Giảm giá</span>
                                    </td>
                                    <td>
                                        <input class="input" type="text">
                                    </td>
                                    <td>
                                        <label class="switch">
                                            <input type="checkbox" ng-model="isDiscountByPercent">
                                            <span class="slider"></span>
                                        </label>
                                    </td>
                                </tr>
                            </table>

                            <span class="group-control">
                                &nbsp;
                                <input type="button" class="button" value="5%">
                                <input type="button" class="button" value="10%">
                                <input type="button" class="button" value="15%">
                            </span>
                        </div>
                        <div class="remove-btn" ng-click="showHideDiscountOrder()"></div>
                    </div>
                </div>

                <div id="create-order">
                    <div id="left">
                        <p id="title">TỔNG CỘNG</p>
                        <p id="total">100.000</p>
                    </div>
                    <div id="right">
                        <a id="create-button" href="#">
                            Tạo đơn hàng
                        </a>
                    </div>
                </div>

                <div id="pay">
                    <table>
                        <tr>
                            <td class="title">
                                <span>Tiền hàng:</span>
                            </td>
                            <td>
                                100.000
                            </td>
                        </tr>
                        <tr>
                            <td class="title">
                                <span>Giảm giá:</span>
                            </td>
                            <td id="img-gift-relative">
                                100.000
                                <span id="discount-order" ng-click="showHideDiscountOrder()" title="Giảm giá đơn hàng"><img width="14" height="14" src="https://emojipedia-us.s3.amazonaws.com/thumbs/120/facebook/111/wrapped-present_1f381.png" /></span>
                            </td>
                        </tr>
                    </table>
                    <div class="separator2"></div>
                    <table>
                        <tr>
                            <td class="title">
                                <span title="Phí vận chuyển">Phí VC:</span>
                            </td>
                            <td>
                                100.000
                            </td>
                        </tr>
                    </table>
                    <div class="separator2"></div>
                    <table>
                        <tr>
                            <td class="title">
                                <span>Thanh toán:</span>
                            </td>
                            <td>
                                100000
                            </td>
                        </tr>
                        <tr>
                            <td class="title">
                                <span>Khách đưa:</span>
                            </td>
                            <td>
                                100.000
                            </td>

                        </tr>
                        <tr>
                            <td class="title">
                                <span>Còn nợ:</span>
                            </td>
                            <td>
                                100.000
                            </td>
                        </tr>
                    </table>
                </div>
                <div id="toolbar">
                    <span class="note icon1"></span>
                    <span class="discount icon2"></span>
                    <span class="delivery icon3"></span>
                    <span class="paid icon4"></span>
                    <span class="toolbar-icon icon5" ng-click="showHideConfig()"></span> 
                </div>
                <div id="config-popover" ng-show="isOpenConfigPopOver">
                    <div class="popover-content">
                        <ul>
                            <li class="checked item">Vận chuyển</li>
                            <li class="seperator2"></li>
                            <li class="checked item">Thanh toán</li>
                            <li class="seperator2"></li>
                            <li class="item" ng-click="showHideCreateCustomer()">Thêm khách hàng</li>
                            <li class="seperator2"></li>
                            <li class="item">Thêm ghi chú</li>
                            <li class="seperator2"></li>
                            <li class="item">Ghi chú giao hàng</li>
                        </ul>
                    </div>
                    <div class="triangle"></div>
                </div>
            </div>
        </div>
    </div>
</div>
